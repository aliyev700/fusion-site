<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Admin Panel</title>
</head>
<body class=" p-10">

  <header class="mb-10">
    
    <button onclick="window.location.href='index.html'" class="mt-2 px-4 py-2 bg-[#793df9] text-white rounded hover:bg-white hover:text-[#793df9] border border-[#793df9]">Go to Index</button>
  </header>

  <main>
    <section class="new-forms bg-white p-8 rounded shadow-lg w-[800px] shadow-2xl">
      <h2 class="text-2xl font-bold mb-4">Add New Property</h2>

      <form id="form">
        <div class="mb-4">
          <label for="title" class="block mb-1 font-medium">Brand</label>
          <input type="text" id="title" class="w-full border rounded px-3 py-2" placeholder="Car In Merric Way" required>
        </div>

        <div class="mb-4">
          <label for="photo" class="block mb-1 font-medium">car's Photo</label>
          <input type="text" id="photo" class="w-full border rounded px-3 py-2" placeholder="https://..." required>
        </div>

        <div class="mb-4">
          <label for="address" class="block mb-1 font-medium">Address</label>
          <input type="text" id="address" class="w-full border rounded px-3 py-2" placeholder="Merrick Way, Miami, FL" required>
        </div>

        <div class="mb-4 flex gap-4">
          <div>
            <label for="buses" class="block mb-1 font-medium">engine</label>
            <input type="number" id="buses" class="border rounded px-3 py-2" value="3">
          </div>
          <div>
            <label for="rooms" class="block mb-1 font-medium">year</label>
            <input type="number" id="rooms" class="border rounded px-3 py-2" value="3">
          </div>
          <div>
            <label for="size" class="block mb-1 font-medium">Size </label>
            <input type="text" id="size" class="border rounded px-3 py-2" value="4300">
          </div>
        </div>

        <div class="mb-4 flex gap-4">
          <div>
            <label for="owner" class="block mb-1 font-medium">Owner</label>
            <input type="text" id="owner" class="border rounded px-3 py-2" value="Ismayil">
          </div>
          <div>
            <label for="price" class="block mb-1 font-medium">Price ($)</label>
            <input type="text" id="price" class="border rounded px-3 py-2" value="40000">
          </div>
        </div>

        <div>
          <button type="submit" class="px-6 py-2 bg-[#793df9] text-white rounded hover:bg-white hover:text-[#793df9] border border-[#793df9]">Add Property</button>
        </div>

        
      </form>
    </section>

    <div class="flex justify-end mb-6">
        <button id="delete-all" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">
          Delete All
        </button>
      </div>
  </main>

   <script>
    const LOCAL_BASE = "http://localhost:3000"; 
    const form = document.getElementById('form');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const newProperty = {
        title: document.getElementById('title').value,
        photo: document.getElementById('photo').value,
        address: document.getElementById('address').value,
        buses: Number(document.getElementById('buses').value),
        rooms: Number(document.getElementById('rooms').value),
        size: document.getElementById('size').value,
        owner: document.getElementById('owner').value,
        price: Number(document.getElementById('price').value)
      };

      try {
        const res = await fetch(`${LOCAL_BASE}/products`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(newProperty)
        });

       

        alert("Property added successfully!");
        form.reset();

      } catch (err) {
        console.error(err);
        alert("Error adding property. Check console.");
      }
    });

    
    const deleteAllBtn = document.getElementById("delete-all");
    const propertiesList = document.getElementById("properties-list");
    
    deleteAllBtn.addEventListener("click", async () => {
      try {
        const res = await fetch(`${LOCAL_BASE}/products`);
        const data = await res.json();
    
        await Promise.all(
          data.map(item =>
            fetch(`${LOCAL_BASE}/products/${item.id}`, { method: "DELETE" })
          )
        );
    
        propertiesList.innerHTML = "";
        
      } catch (err) {
        console.error(err);
       
      }
    });

    
  </script> 




    


  <!-- <script>
    const LOCAL_BASE = "http://localhost:3000";
    const propertiesList = document.getElementById("properties-list");
    const deleteAllBtn = document.getElementById("delete-all");
    
    // Функция загрузки карточек
    async function fetchProperties() {
      try {
        const res = await fetch(`${LOCAL_BASE}/products`);
        if (!res.ok) throw new Error("Ошибка загрузки данных");
        const data = await res.json();
        renderProperties(data);
      } catch (err) {
        console.error(err);
      }
    }
    
    // Функция рендера
    function renderProperties(properties) {
      propertiesList.innerHTML = "";
      properties.forEach((p) => {
        const html = `
          <div class="homeinmerric w-[30%] border shadow-2xl h-[500px]">
            <div class="img1 w-[100%] overflow-hidden">
              <img class="w-full h-[280px] object-cover" src="${p.photo}" alt="">
            </div>
            <div class="container-home pl-5">
              <h1 class="text-[20px] font-bold mt-2">${p.title}</h1>
              <p><i class="ri-map-pin-2-line text-[#793df9]"></i> ${p.address || 'Unknown'}</p>
              <div class="mt-2 bus flex gap-4">
                <p><i class="ri-bus-line text-[#793df9]"></i> ${p.engine|| 0}</p>
                <p><i class="ri-showers-line text-[#793df9]"></i> ${p.year|| 0}</p>
                <p><i class="ri-command-line text-[#793df9]"></i> ${p.size || '0 sq ft'}</p>
              </div>
              <div class="price flex gap-32 relative top-4">
                <p class="text-[20px] mt-[2px] font-medium"><i class="ri-account-circle-2-line"></i> ${p.owner || 'Unknown'}</p>
                <p class="text-[#793df9] text-[22px] font-bold">$${p.price}</p>
              </div>
            </div>
          </div>
        `;
        propertiesList.insertAdjacentHTML("beforeend", html);
      });
    }
    
    
    deleteAllBtn.addEventListener("click", async () => {
      try {
        const res = await fetch(`${LOCAL_BASE}/products`);
        const data = await res.json();
        
        
        await Promise.all(
          data.map((item) =>
            fetch(`${LOCAL_BASE}/products/${item.id}`, { method: "DELETE" })
          )
        );
        
        propertiesList.innerHTML = "";
        alert("All properties deleted!");
      } catch (err) {
        console.error("Error deleting properties:", err);
      }
    });
    
    
    fetchProperties();
    </script> -->
    
</body>
</html>


