<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Admin Panel</title>
</head>
<body class=" p-10">

  <header class="mb-10">
    
    <button onclick="window.location.href='index.html'" class="mt-2 px-4 py-2 bg-[#793df9] text-white rounded hover:bg-white hover:text-[#793df9] border border-[#793df9]">Go to Index</button>
  </header>

  <main>
    <section class="new-forms bg-white p-8 rounded shadow-lg w-[800px] shadow-2xl">
      <h2 class="text-2xl font-bold mb-4">Add New Property</h2>

      <form id="form">
        <div class="mb-4">
          <label for="title" class="block mb-1 font-medium">Brand</label>
          <input type="text" id="title" class="w-full border rounded px-3 py-2" placeholder="Car In Merric Way" required>
        </div>

        <div class="mb-4">
          <label for="photo" class="block mb-1 font-medium">car's Photo</label>
          <input type="text" id="photo" class="w-full border rounded px-3 py-2" placeholder="https://..." required>
        </div>

        <div class="mb-4">
          <label for="address" class="block mb-1 font-medium">Address</label>
          <input type="text" id="address" class="w-full border rounded px-3 py-2" placeholder="Merrick Way, Miami, FL" required>
        </div>

        <div class="mb-4 flex gap-4">
          <div>
            <label for="buses" class="block mb-1 font-medium">engine</label>
            <input type="number" id="buses" class="border rounded px-3 py-2" value="3">
          </div>
          <div>
            <label for="rooms" class="block mb-1 font-medium">year</label>
            <input type="number" id="rooms" class="border rounded px-3 py-2" value="3">
          </div>
          <div>
            <label for="size" class="block mb-1 font-medium">Size </label>
            <input type="text" id="size" class="border rounded px-3 py-2" value="4300">
          </div>
        </div>

        <div class="mb-4 flex gap-4">
          <div>
            <label for="owner" class="block mb-1 font-medium">Owner</label>
            <input type="text" id="owner" class="border rounded px-3 py-2" value="Ismayil">
          </div>
          <div>
            <label for="price" class="block mb-1 font-medium">Price ($)</label>
            <input type="text" id="price" class="border rounded px-3 py-2" value="40000">
          </div>
        </div>

        <div>
          <button type="submit" class="px-6 py-2 bg-[#793df9] text-white rounded hover:bg-white hover:text-[#793df9] border border-[#793df9]">Add Property</button>
        </div>

        
      </form>
    </section>

    <div class="flex justify-end mb-6">
        <button id="delete-all" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">
          Delete All
        </button>
      </div>
  </main>

   <script>
    const LOCAL_BASE = "http://localhost:3000"; 
    const form = document.getElementById('form');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const newProperty = {
        title: document.getElementById('title').value,
        photo: document.getElementById('photo').value,
        address: document.getElementById('address').value,
        buses: Number(document.getElementById('buses').value),
        rooms: Number(document.getElementById('rooms').value),
        size: document.getElementById('size').value,
        owner: document.getElementById('owner').value,
        price: Number(document.getElementById('price').value)
      };

      try {
        const res = await fetch(`${LOCAL_BASE}/products`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(newProperty)
        });

       

        alert("Property added successfully!");
        form.reset();

      } catch (err) {
        console.error(err);
        alert("Error adding property. Check console.");
      }
    });

    
    const deleteAllBtn = document.getElementById("delete-all");
    const propertiesList = document.getElementById("properties-list");
    
    deleteAllBtn.addEventListener("click", async () => {
      try {
        const res = await fetch(`${LOCAL_BASE}/products`);
        const data = await res.json();
    
        await Promise.all(
          data.map(item =>
            fetch(`${LOCAL_BASE}/products/${item.id}`, { method: "DELETE" })
          )
        );
    
        propertiesList.innerHTML = "";
        
      } catch (err) {
        console.error(err);
       
      }
    });

    
  </script> 




    

</body>
</html>


